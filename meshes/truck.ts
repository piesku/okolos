import {Mesh} from "../common/mesh.js";
import {GL_ARRAY_BUFFER, GL_ELEMENT_ARRAY_BUFFER, GL_STATIC_DRAW} from "../common/webgl.js";

export function mesh_truck(gl: WebGLRenderingContext): Mesh {
    let vertex_buf = gl.createBuffer()!;
    gl.bindBuffer(GL_ARRAY_BUFFER, vertex_buf);
    gl.bufferData(GL_ARRAY_BUFFER, vertex_arr, GL_STATIC_DRAW);

    let normal_buf = gl.createBuffer()!;
    gl.bindBuffer(GL_ARRAY_BUFFER, normal_buf);
    gl.bufferData(GL_ARRAY_BUFFER, normal_arr, GL_STATIC_DRAW);

    let texcoord_buf = gl.createBuffer()!;
    gl.bindBuffer(GL_ARRAY_BUFFER, texcoord_buf);
    gl.bufferData(GL_ARRAY_BUFFER, texcoord_arr, GL_STATIC_DRAW);

    let weights_buf = gl.createBuffer()!;
    gl.bindBuffer(GL_ARRAY_BUFFER, weights_buf);
    gl.bufferData(GL_ARRAY_BUFFER, weights_arr, GL_STATIC_DRAW);

    let index_buf = gl.createBuffer()!;
    gl.bindBuffer(GL_ELEMENT_ARRAY_BUFFER, index_buf);
    gl.bufferData(GL_ELEMENT_ARRAY_BUFFER, index_arr, GL_STATIC_DRAW);

    return {
        VertexBuffer: vertex_buf,
        VertexArray: vertex_arr,
        NormalBuffer: normal_buf,
        NormalArray: normal_arr,
        TexCoordBuffer: texcoord_buf,
        TexCoordArray: texcoord_arr,
        WeightsBuffer: weights_buf,
        WeightsArray: weights_arr,
        IndexBuffer: index_buf,
        IndexArray: index_arr,
        IndexCount: index_arr.length,
    };
}

// prettier-ignore
let vertex_arr = Float32Array.from([
    0.415, 0, 0.6142,
    -0.415, 0.081417, 0.6142,
    -0.415, 0, 0.6142,
    0.415, 0.081417, 0.6142,
    0.415, 0, 0.6142,
    -0.415, 0, -0.6308,
    0.415, 0, -0.6308,
    -0.415, 0, 0.6142,
    -0.415, 0, 0.6142,
    -0.415, 0.081417, -0.6308,
    -0.415, 0, -0.6308,
    -0.415, 1.00596, -0.569496,
    -0.415, 1.00596, -0.34651,
    -0.415, 0.081417, 0.6142,
    -0.415, 1.00596, 0.8217,
    -0.415, 0.081417, 0.8217,
    -0.415, 0.82719, -0.656389,
    -0.415, 0.82719, -0.692909,
    -0.415, 0.779719, -0.74842,
    -0.415, 0.081417, -0.8217,
    -0.415, 0.534807, -0.8217,
    -0.415, 0.081417, -0.6308,
    0.415, 0, -0.6308,
    -0.415, 0, -0.6308,
    0.415, 0.081417, -0.6308,
    -0.415, 0.82719, -0.692909,
    0.415, 0.82719, -0.656389,
    0.415, 0.82719, -0.692909,
    -0.415, 0.82719, -0.656389,
    -0.415, 0.779719, -0.74842,
    0.415, 0.534807, -0.8217,
    -0.415, 0.534807, -0.8217,
    0.415, 0.779719, -0.74842,
    0.415, 0.081417, -0.8217,
    -0.415, 0.081417, -0.8217,
    0.415, 0.82719, -0.692909,
    -0.415, 0.82719, -0.692909,
    0.415, 1.00596, 0.8217,
    0.415, 0.081417, 0.6142,
    0.415, 1.00596, -0.34651,
    0.415, 0.081417, 0.8217,
    0.415, 0, 0.6142,
    0.415, 1.00596, -0.569496,
    0.415, 0, -0.6308,
    0.415, 0.081417, -0.6308,
    0.415, 0.82719, -0.656389,
    0.415, 0.82719, -0.692909,
    0.415, 0.779719, -0.74842,
    0.415, 0.081417, -0.8217,
    0.415, 0.534807, -0.8217,
    -0.415, 1.00596, -0.569496,
    0.415, 0.82719, -0.656389,
    -0.415, 0.82719, -0.656389,
    0.415, 1.00596, -0.569496,
    -0.415, 0.081417, -0.6308,
    0.415, 0.081417, -0.8217,
    0.415, 0.081417, -0.6308,
    -0.415, 0.081417, -0.8217,
    0.415, 1.00596, 0.8217,
    -0.415, 0.081417, 0.8217,
    0.415, 0.081417, 0.8217,
    -0.415, 1.00596, 0.8217,
    -0.415, 0.081417, 0.8217,
    0.415, 0.081417, 0.6142,
    0.415, 0.081417, 0.8217,
    -0.415, 0.081417, 0.6142,
    -0.415, 1.00596, -0.569496,
    0.415, 1.00596, -0.34651,
    0.415, 1.00596, -0.569496,
    -0.415, 1.00596, -0.34651,
    -0.415, 1.00596, -0.34651,
    0.415, 1.00596, 0.8217,
    0.415, 1.00596, -0.34651,
    -0.415, 1.00596, 0.8217
]);

// prettier-ignore
let normal_arr = Float32Array.from([
    0, 0, 1,
    0, 0, 1,
    0, 0, 1,
    0, 0, 1,
    0, -1, 0,
    0, -1, 0,
    0, -1, 0,
    0, -1, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    -1, 0, 0,
    0, 0, -1,
    0, 0, -1,
    0, 0, -1,
    0, 0, -1,
    0, 1, 0,
    0, 1, 0,
    0, 1, 0,
    0, 1, 0,
    0, 0.5455, -0.8381,
    0, 0.1449, -0.9895,
    0, 0.1449, -0.9895,
    0, 0.5455, -0.8381,
    0, 0, -1,
    0, 0, -1,
    0, 0.76, -0.6499,
    0, 0.76, -0.6499,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    1, 0, 0,
    0, 0.8477, -0.5305,
    0, 0.4372, -0.8994,
    0, 0.4372, -0.8994,
    0, 0.8477, -0.5305,
    0, -1, 0,
    0, -1, 0,
    0, -1, 0,
    0, -1, 0,
    0, 0, 1,
    0, 0, 1,
    0, 0, 1,
    0, 0, 1,
    0, -1, 0,
    0, -1, 0,
    0, -1, 0,
    0, -1, 0,
    0, 0.8477, -0.5305,
    0, 1, 0,
    0, 0.8477, -0.5305,
    0, 1, 0,
    0, 1, 0,
    0, 1, 0,
    0, 1, 0,
    0, 1, 0
]);

// prettier-ignore
let texcoord_arr = Float32Array.from([
    0.65603, 0.030456,
    0.335443, 0.061903,
    0.335443, 0.030456,
    0.65603, 0.061903,
    -0.283681, 0.064085,
    -0.106545, 0.329789,
    -0.283681, 0.329789,
    -0.106545, 0.064085,
    -2.12626, 1.38788,
    -2.88384, 1.43742,
    -2.88384, 1.38788,
    -2.84654, 2,
    -2.71085, 2,
    -2.12626, 1.43742,
    -2, 2,
    -2, 1.43742,
    -2.89941, 1.89122,
    -2.92163, 1.89122,
    -2.95541, 1.86233,
    -3, 1.43742,
    -3, 1.71331,
    -0.596161, 0.06189,
    -0.932092, 0.028938,
    -0.596161, 0.028938,
    -0.932092, 0.06189,
    -0.663066, 0.32858,
    -0.998996, 0.343361,
    -0.998996, 0.32858,
    -0.663066, 0.343361,
    -0.663066, 0.299018,
    -0.998996, 0.195551,
    -0.663066, 0.195551,
    -0.998996, 0.299018,
    -0.998997, 0.012048,
    -0.663066, 0.012048,
    -0.998996, 0.32858,
    -0.663066, 0.32858,
    -2, 2,
    -2.12626, 1.43742,
    -2.71085, 2,
    -2, 1.43742,
    -2.12626, 1.38788,
    -2.84654, 2,
    -2.88384, 1.38788,
    -2.88384, 1.43742,
    -2.89941, 1.89122,
    -2.92163, 1.89122,
    -2.95541, 1.86233,
    -3, 1.43742,
    -3, 1.71331,
    -0.759491, 0.366406,
    -0.956689, 0.319182,
    -0.75949, 0.319181,
    -0.956689, 0.366407,
    -0.593758, 0.009172,
    -0.929688, 0.086436,
    -0.929688, 0.009172,
    -0.593758, 0.086436,
    0.660445, 0.379064,
    0.339857, 0.02196,
    0.660444, 0.02196,
    0.339858, 0.379064,
    0.322442, 0.084078,
    0.643029, 0.003931,
    0.643029, 0.084078,
    0.322442, 0.003931,
    -0.77052, 0.322972,
    -0.962666, 0.374594,
    -0.962666, 0.322972,
    -0.77052, 0.374594,
    -2.71196, 2.5669,
    -2.11958, 2.98778,
    -2.71196, 2.98778,
    -2.11958, 2.5669
]);

// prettier-ignore
let weights_arr = Float32Array.from([
    // Weights must be assigned manually for now b/c OBJ doesn't support them.
    // WARNING: Remaking the mesh file will overwrite your weights here.
]);

// prettier-ignore
let index_arr = Uint16Array.from([
    73, 70, 71,
    72, 71, 70,
    69, 66, 67,
    68, 67, 66,
    65, 62, 63,
    64, 63, 62,
    61, 58, 59,
    60, 59, 58,
    57, 54, 55,
    56, 55, 54,
    53, 50, 51,
    52, 51, 50,
    49, 48, 47,
    44, 47, 48,
    46, 47, 44,
    45, 46, 44,
    42, 45, 44,
    43, 42, 44,
    41, 42, 43,
    39, 42, 41,
    38, 39, 41,
    40, 37, 38,
    39, 38, 37,
    34, 33, 31,
    30, 31, 33,
    36, 29, 35,
    32, 35, 29,
    32, 29, 30,
    31, 30, 29,
    28, 25, 26,
    27, 26, 25,
    24, 21, 22,
    23, 22, 21,
    15, 13, 14,
    14, 13, 12,
    20, 18, 19,
    9, 19, 18,
    17, 9, 18,
    16, 9, 17,
    11, 9, 16,
    13, 8, 12,
    12, 8, 11,
    11, 8, 9,
    10, 9, 8,
    7, 4, 5,
    6, 5, 4,
    3, 0, 1,
    2, 1, 0
]);
